@inherits LayoutComponentBase
@inject IModelConfigurationService ModelService

<RadzenLayout>
    <RadzenHeader>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="1rem" Style="padding: 0.75rem 1.5rem;">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                <span style="font-size: 1.5rem;">&#x1F9CA;</span>
                <RadzenText TextStyle="TextStyle.H4" Style="margin: 0;">LoraMint</RadzenText>
            </RadzenStack>
            <RadzenText TextStyle="TextStyle.Caption" Style="color: var(--text-muted); font-family: var(--font-mono);">
                v1.0 // AI Image Studio
            </RadzenText>
            <RadzenSpacer />
            @if (!string.IsNullOrEmpty(currentModelName))
            {
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                    <RadzenText TextStyle="TextStyle.Caption" Style="color: var(--text-muted); font-family: var(--font-mono);">
                        Powered by
                    </RadzenText>
                    <RadzenText TextStyle="TextStyle.Caption" Style="color: #8b5cf6; font-family: var(--font-mono); font-weight: 600;">
                        @currentModelName
                    </RadzenText>
                </RadzenStack>
            }
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.75rem">
                <span style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; box-shadow: 0 0 8px #10b981;"></span>
                <RadzenText TextStyle="TextStyle.Caption" Style="color: var(--text-secondary); font-family: var(--font-mono);">
                    System Online
                </RadzenText>
            </RadzenStack>
        </RadzenStack>
    </RadzenHeader>
    <RadzenSidebar Style="padding-top: 1rem;">
        <NavMenu />
    </RadzenSidebar>
    <RadzenBody>
        <div style="padding: 1.5rem 2rem;">
            @Body
        </div>
    </RadzenBody>
</RadzenLayout>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

@code {
    private string? currentModelName;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var model = await ModelService.GetSelectedModelAsync();
            currentModelName = model?.Name;
        }
        catch
        {
            // Silently ignore errors - model name is optional UI element
        }
    }
}
